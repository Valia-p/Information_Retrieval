<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <title>Information Retrieval</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <header>
        <div class="headerText">
            <h1>Greek Parliament Information</h1>
        </div>
    </header>
    <div class="searchBar">
        <input type="search" placeholder="Search...">
        <button type="submit"><i class="fa fa-search"></i></button>
    </div>
    <div class="groupResults">

    </div>

<script>
    const searchButton = document.querySelector("button");
    const searchInput = document.querySelector("input[type='search']");
    const resultDiv = document.querySelector(".groupResults");

    searchButton.addEventListener("click", () => {
        const query = searchInput.value;

        fetch("/search", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ query: query })
        })
        .then(response => response.json())
        .then(data => {
            resultDiv.innerHTML = "";
            if (data.length === 0) {
                resultDiv.innerHTML = "<p>No results found.</p>";
            } else {
                data.forEach(item => {
                    const div = document.createElement("div");
                    div.classList.add("result");
                    div.innerHTML = `
                        <h3>${item.member} (${item.party}) - ${item.date}</h3>
                        <p><strong>Score:</strong> ${item.score}</p>
                        <p>${item.speech}</p>
                    `;
                    resultDiv.appendChild(div);
                });
            }
        });
    });
</script>
</body>
</html>
