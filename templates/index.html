<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <title>Information Retrieval</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="static/normalize.css">
    <link rel="stylesheet" href="static/styles.css">
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>Hellenic Parliament Information</h1>
            <nav>
                <ul>
                    <li><a href="#search">Search</a></li>
                    <li><a href="#keywords">Keyword Tracking</a></li>
                    <li><a href="#similarity">Similarity Analysis</a></li>
                    <li><a href="#themes">Thematic Analysis</a></li>
<!--                    <li><a href="#sentiment">Sentiment Analysis</a></li>-->
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- Search Section -->
        <section id="search" class="section">
            <div class="container">
                <h2>Search Parliamentary Speeches</h2>
                <div class="search-container">
                    <form id="search-form">
                        <div class="search-row">
                            <input type="text" id="search-input" placeholder="Enter keywords or phrases...">
                            <button type="submit">Search</button>
                        </div>
                            <div class="search-filters">
                              <!-- Date -->
                              <div class="filter-group" style="flex:1 1 320px; max-width: 420px;">
                                <label for="date-range">Date Range:</label>
                                <select id="date-range" style="width:100%;">
                                  <option value="all">All Time (1989-2020)</option>
                                  <option value="1989-1995">1989-1995</option>
                                  <option value="1996-2000">1996-2000</option>
                                  <option value="2001-2005">2001-2005</option>
                                  <option value="2006-2010">2006-2010</option>
                                  <option value="2011-2015">2011-2015</option>
                                  <option value="2016-2020">2016-2020</option>
                                </select>
                              </div>

                              <!-- Party -->
                              <div class="filter-group" style="flex:1 1 320px; max-width: 420px;">
                                <label for="party-filter">Political Party:</label>
                                <select id="party-filter" style="width:100%;">
                                  <option value="all">All Parties</option>
                                </select>
                              </div>

                              <!-- Member -->
                              <div class="filter-group" style="flex:1 1 320px; max-width: 420px;">
                                <label for="mp-filter">Parliament Member:</label>
                                <select id="mp-filter" style="width:100%;">
                                  <option value="all">All Members</option>
                                </select>
                              </div>
                            </div>

                    </form>
                </div>
                <div class="search-results" id="search-results">
                    <p class="placeholder-text">Enter search terms above to see results</p>
                </div>
            </div>
        </section>

        <!-- Keyword Tracking Section -->
        <section id="keywords" class="section">
          <div class="container">
            <h2>Keyword Tracking Over Time</h2>

            <div class="keyword-tracking">
              <div class="tracking-controls">
                <label for="tracking-view">View By:</label>
                <select id="tracking-view">
                  <option value="overall">Overall</option>
                  <option value="member">By Member</option>
                  <option value="party">By Political Party</option>
                </select>

                <select id="entity-select" style="display:none">
                  <option value="" selected disabled>Choose from list…</option>
                </select>

                <label for="topk-select" style="margin-left:.5rem;">Top</label>
                  <select id="topk-select">
                    <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
                    <option selected>8</option>
                    <option>6</option><option>7</option><option>9</option><option>10</option>
                  </select>

                <button id="add-keyword">Show</button>
              </div>

              <div class="chart-container">
                <canvas id="keyword-canvas" height="200"></canvas>
              </div>
            </div>
          </div>
        </section>

        <!-- Similarity Section -->
        <section id="similarity" class="section">
          <div class="container">
            <h2>Parliament Member Similarity</h2>
            <p>Find members with the most similar speech patterns.</p>

            <!-- Controls -->
            <div class="panel">
              <div class="grid-3">
                <div class="control">
                  <label for="member-select">Choose a member (dropdown)</label>
                  <select id="member-select">
                    <option value="" selected disabled>Loading members…</option>
                  </select>
                </div>

                <div class="control">
                  <label for="name-input">…or type a name</label>
                  <input list="member-list" id="name-input" placeholder="Start typing a member…">
                  <datalist id="member-list"></datalist>
                  <small class="muted">Tip: if both are filled, dropdown wins.</small>
                </div>

                <div class="control">
                  <label for="sim-topk">Top-K neighbors</label>
                  <select id="sim-topk">
                    <option>5</option><option selected>10</option>
                  </select>
                  <button id="btn-show" class="primary">Show Similar</button>
                </div>
              </div>
            </div>

            <!-- Chart -->
            <div class="card">
              <div class="chart-container">
                <canvas id="similarity-chart" height="200"></canvas>
              </div>
            </div>

            <!-- Table of neighbors -->
            <div class="card">
              <div class="card-header">
                <h3 id="neighbors-title" class="card-title">Neighbors</h3>
              </div>
              <div class="table-wrap">
                <table class="table">
                  <thead>
                    <tr>
                      <th style="width:64px">#</th>
                      <th>Member</th>
                      <th style="width:140px">Similarity</th>
                    </tr>
                  </thead>
                  <tbody id="neighbors-tbody">
                    <tr><td colspan="3" class="muted" style="text-align:center">No data yet</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </section>


        <!-- Thematic Analysis Section -->
        <section id="thematic" class="section">
          <div class="container">
            <h2>Thematic Analysis</h2>

            <!-- Γράφημα: Κατανομή ομιλιών ανά cluster -->
            <div class="card ta-accent">
              <div class="card-header">
                <h3 class="card-title">Κατανομή Ομιλιών ανά Cluster</h3>
              </div>
              <div class="card-body">
                <div class="chart-container ta-chart-lg">
                  <canvas id="theme-chart" aria-label="Cluster Sizes"></canvas>
                </div>
              </div>
            </div>

            <!-- Grid με clusters (γεμίζει από JS) -->
            <div id="themes-list" class="theme-clusters"></div>

            <!-- Panel λεπτομερειών επιλεγμένου cluster (γεμίζει από JS) -->
            <div id="cluster-panel" class="card ta-info" style="display:none; margin-top: var(--spacing-lg);">
              <div class="card-header">
                <h3 class="card-title" id="cluster-panel-title">Cluster</h3>
              </div>
              <div class="card-body">
                <!-- KPIs -->
                <div class="ta-kpis">
                  <div class="ta-kpi">
                    <div class="ta-kpi-label">Μέγεθος</div>
                    <div class="ta-kpi-value" id="kpi-size">—</div>
                  </div>
                  <div class="ta-kpi">
                    <div class="ta-kpi-label">Χρονικό εύρος</div>
                    <div class="ta-kpi-value" id="kpi-dates">—</div>
                  </div>
                  <div class="ta-kpi">
                    <div class="ta-kpi-label">Μέση έκταση ομιλίας</div>
                    <div class="ta-kpi-value" id="kpi-avglen">—</div>
                  </div>
                  <div class="ta-kpi">
                    <div class="ta-kpi-label">Συνοχή (centroid)</div>
                    <div class="ta-kpi-value" id="kpi-cohesion">—</div>
                  </div>
                </div>

                <!-- Keywords -->
                <div class="ta-section">
                  <div class="ta-section-title">Top Keywords</div>
                  <div id="cluster-panel-keywords" class="ta-keywords"></div>
                </div>

                <!-- Κατανομή κομμάτων -->
                <div class="ta-section">
                  <div class="ta-section-title">Κατανομή κομμάτων</div>
                  <div id="ta-party-bars" class="ta-bars"></div>
                </div>

                <!-- Κορυφαίοι Βουλευτές -->
                <div class="ta-section">
                  <div class="ta-section-title">Κορυφαίοι βουλευτές (κατά πλήθος ομιλιών)</div>
                  <ol id="ta-top-members" class="ta-toplist"></ol>
                </div>

                <!-- Αντιπροσωπευτική ομιλία -->
                <div class="ta-section">
                  <div class="ta-section-title">Αντιπροσωπευτική ομιλία</div>
                  <div id="ta-repr" class="ta-repr">
                    <div class="ta-repr-meta" id="ta-repr-meta">—</div>
                    <div class="ta-repr-text" id="ta-repr-text"><em>—</em></div>
                  </div>
                </div>

                <!-- Δείγματα ομιλιών -->
                <div class="ta-section">
                  <div class="ta-section-title">Ενδεικτικές ομιλίες</div>
                  <div class="table-wrap">
                    <table class="table" id="cluster-panel-table">
                      <thead>
                        <tr>
                          <th style="width:64px">#</th>
                          <th>Βουλευτής</th>
                          <th>Κόμμα</th>
                          <th style="width:160px">Ημερομηνία</th>
                        </tr>
                      </thead>
                      <tbody><!-- γεμίζει από JS --></tbody>
                    </table>
                  </div>
                </div>

              </div>
            </div>

          </div>
        </section>

    </main>
    <script src="static/search.js"></script>
    <script src="static/keywords.js"></script>
    <script src="static/similarity.js"></script>
    <script src="static/themes.js"></script>

<!--<script>-->
<!--&lt;!&ndash;    const searchButton = document.getElementById("searchBtn");&ndash;&gt;-->
<!--&lt;!&ndash;    const searchInput = document.getElementById("searchInput");&ndash;&gt;-->
<!--&lt;!&ndash;    const resultDiv = document.querySelector(".groupResults");&ndash;&gt;-->

<!--&lt;!&ndash;    const showKeywordsBtn = document.getElementById("showKeywordsBtn");&ndash;&gt;-->
<!--&lt;!&ndash;    const nameInput = document.getElementById("nameInput");&ndash;&gt;-->
<!--&lt;!&ndash;    const typeSelect = document.getElementById("typeSelect");&ndash;&gt;-->
<!--&lt;!&ndash;    const keywordResults = document.querySelector(".keywordResults");&ndash;&gt;-->

<!--&lt;!&ndash;    // SEARCH BUTTON&ndash;&gt;-->
<!--&lt;!&ndash;    searchButton.addEventListener("click", () => {&ndash;&gt;-->
<!--&lt;!&ndash;        const query = searchInput.value;&ndash;&gt;-->

<!--&lt;!&ndash;        fetch("/search", {&ndash;&gt;-->
<!--&lt;!&ndash;            method: "POST",&ndash;&gt;-->
<!--&lt;!&ndash;            headers: {&ndash;&gt;-->
<!--&lt;!&ndash;                "Content-Type": "application/json"&ndash;&gt;-->
<!--&lt;!&ndash;            },&ndash;&gt;-->
<!--&lt;!&ndash;            body: JSON.stringify({ query: query })&ndash;&gt;-->
<!--&lt;!&ndash;        })&ndash;&gt;-->
<!--&lt;!&ndash;        .then(response => response.json())&ndash;&gt;-->
<!--&lt;!&ndash;        .then(data => {&ndash;&gt;-->
<!--&lt;!&ndash;            resultDiv.innerHTML = "";&ndash;&gt;-->
<!--&lt;!&ndash;            if (data.length === 0) {&ndash;&gt;-->
<!--&lt;!&ndash;                resultDiv.innerHTML = "<p>No results found.</p>";&ndash;&gt;-->
<!--&lt;!&ndash;            } else {&ndash;&gt;-->
<!--&lt;!&ndash;                data.forEach(item => {&ndash;&gt;-->
<!--&lt;!&ndash;                    const div = document.createElement("div");&ndash;&gt;-->
<!--&lt;!&ndash;                    div.classList.add("result");&ndash;&gt;-->
<!--&lt;!&ndash;                    div.innerHTML = `&ndash;&gt;-->
<!--&lt;!&ndash;                        <h3>${item.member} (${item.party}) - ${item.date}</h3>&ndash;&gt;-->
<!--&lt;!&ndash;                        <p><strong>Score:</strong> ${item.score}</p>&ndash;&gt;-->
<!--&lt;!&ndash;                        <p>${item.speech}</p>&ndash;&gt;-->
<!--&lt;!&ndash;                    `;&ndash;&gt;-->
<!--&lt;!&ndash;                    resultDiv.appendChild(div);&ndash;&gt;-->
<!--&lt;!&ndash;                });&ndash;&gt;-->
<!--&lt;!&ndash;            }&ndash;&gt;-->
<!--&lt;!&ndash;        });&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->

<!--&lt;!&ndash;    // KEYWORDS BY YEAR BUTTON&ndash;&gt;-->
<!--&lt;!&ndash;    showKeywordsBtn.addEventListener("click", () => {&ndash;&gt;-->
<!--&lt;!&ndash;        const name = nameInput.value.trim().toLowerCase();&ndash;&gt;-->
<!--&lt;!&ndash;        const type = typeSelect.value;&ndash;&gt;-->

<!--&lt;!&ndash;        if (!name) {&ndash;&gt;-->
<!--&lt;!&ndash;            alert("Δώσε όνομα βουλευτή ή κόμματος.");&ndash;&gt;-->
<!--&lt;!&ndash;            return;&ndash;&gt;-->
<!--&lt;!&ndash;        }&ndash;&gt;-->

<!--&lt;!&ndash;        fetch("/keywords/by_year", {&ndash;&gt;-->
<!--&lt;!&ndash;            method: "POST",&ndash;&gt;-->
<!--&lt;!&ndash;            headers: {&ndash;&gt;-->
<!--&lt;!&ndash;                "Content-Type": "application/json"&ndash;&gt;-->
<!--&lt;!&ndash;            },&ndash;&gt;-->
<!--&lt;!&ndash;            body: JSON.stringify({ type: type, name: name })&ndash;&gt;-->
<!--&lt;!&ndash;        })&ndash;&gt;-->
<!--&lt;!&ndash;        .then(response => response.json())&ndash;&gt;-->
<!--&lt;!&ndash;        .then(data => {&ndash;&gt;-->
<!--&lt;!&ndash;            keywordResults.innerHTML = "";&ndash;&gt;-->
<!--&lt;!&ndash;            if (data.error) {&ndash;&gt;-->
<!--&lt;!&ndash;                keywordResults.innerHTML = "<p>Δε βρέθηκαν δεδομένα.</p>";&ndash;&gt;-->
<!--&lt;!&ndash;                return;&ndash;&gt;-->
<!--&lt;!&ndash;            }&ndash;&gt;-->

<!--&lt;!&ndash;            for (const year in data) {&ndash;&gt;-->
<!--&lt;!&ndash;                const p = document.createElement("p");&ndash;&gt;-->
<!--&lt;!&ndash;                p.innerHTML = `<strong>${year}:</strong><br>`;&ndash;&gt;-->
<!--&lt;!&ndash;                data[year].forEach(obj => {&ndash;&gt;-->
<!--&lt;!&ndash;                    p.innerHTML += `&nbsp;&nbsp;• ${obj.keyword} (score: ${obj.score})<br>`;&ndash;&gt;-->
<!--&lt;!&ndash;                });&ndash;&gt;-->
<!--&lt;!&ndash;                keywordResults.appendChild(p);&ndash;&gt;-->
<!--&lt;!&ndash;            }&ndash;&gt;-->
<!--&lt;!&ndash;        });&ndash;&gt;-->
<!--&lt;!&ndash;    });&ndash;&gt;-->

<!--    //-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->

<!--    // Κάνει ένα απλό search χωρίς φίλτρα προς στιγμήν-->
<!--    // Search functionality for Hellenic Parliament Speech Analysis Platform-->

<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        const searchForm = document.getElementById('search-form');-->
<!--        const searchInput = document.getElementById('search-input');-->
<!--        const searchResults = document.getElementById('search-results');-->
<!--        const dateRangeFilter = document.getElementById('date-range');-->
<!--        const partyFilter = document.getElementById('party-filter');-->
<!--        const mpFilter = document.getElementById('mp-filter');-->

<!--        if (!searchForm || !searchResults) return;-->

<!--        // Search form submission handler-->
<!--        searchForm.addEventListener('submit', function(e) {-->
<!--            e.preventDefault();-->

<!--            const searchTerm = searchInput.value.trim().toLowerCase();-->
<!--            if (searchTerm === '') {-->
<!--                searchResults.innerHTML = '<p class="placeholder-text">Enter search terms above to see results</p>';-->
<!--                return;-->
<!--            }-->

<!--            // Get filter values-->
<!--            const dateRange = dateRangeFilter.value;-->
<!--            const party = partyFilter.value;-->
<!--            const mp = mpFilter.value;-->

<!--            //&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;από Βάλια-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
<!--            fetch("/search", {-->
<!--                method: "POST",-->
<!--                headers: {-->
<!--                    "Content-Type": "application/json"-->
<!--                },-->
<!--                body: JSON.stringify({ query: searchTerm })-->
<!--            })-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--                searchResults.innerHTML = "";-->
<!--                if (data.length === 0) {-->
<!--                    searchResults.innerHTML = "<p>No results found.</p>";-->
<!--                } else {-->
<!--                    console.log(data);-->
<!--                    data.forEach(item => {-->
<!--                        const div = document.createElement("div");-->
<!--                        div.classList.add("result");-->
<!--                        div.innerHTML = `-->
<!--                            <h3>${item.member} (${item.party}) - ${item.date}</h3>-->
<!--                            <p><strong>Score:</strong> ${item.score}</p>-->
<!--                            <p>${item.speech}</p>-->
<!--                        `;-->

<!--                        div.style.backgroundColor = "white";-->
<!--                        div.style.padding = "var(&#45;&#45;spacing-lg)";-->
<!--                        div.style.margin = "5px";-->
<!--                        div.style.borderRadius = "var(&#45;&#45;radius-md)";-->
<!--                        div.style.boxShadow = "0 2px 10px rgba(0, 0, 0, 0.1)";-->
<!--                        div.style.minHeight = "200px";-->

<!--                        searchResults.appendChild(div);-->
<!--                    });-->
<!--                }-->
<!--            });-->
<!--            //-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->

<!--    &lt;!&ndash;        // Perform search with filters&ndash;&gt;-->
<!--    &lt;!&ndash;        const results = performSearch(searchTerm, dateRange, party, mp);&ndash;&gt;-->

<!--    &lt;!&ndash;        // Display results&ndash;&gt;-->
<!--    &lt;!&ndash;        displaySearchResults(results);&ndash;&gt;-->
<!--        });-->


<!--    });-->
<!--</script>-->
</body>
</html>
